<!DOCTYPE html>
<html>
<head>
    <title>RPC é…ç½®æ¸¬è©¦</title>
</head>
<body>
    <h1>RPC é…ç½®æ¸¬è©¦</h1>
    <button onclick="testRpcConfig()">æ¸¬è©¦ RPC é…ç½®</button>
    <button onclick="testAlchemyConnection()">æ¸¬è©¦ Alchemy é€£æ¥</button>
    <div id="results"></div>

    <script>
        function log(message) {
            console.log(message);
            document.getElementById('results').innerHTML += '<div>' + message + '</div>';
        }

        function testRpcConfig() {
            document.getElementById('results').innerHTML = '';
            log('ğŸ” é–‹å§‹ RPC é…ç½®æ¸¬è©¦...');
            
            // è®€å– .env æ–‡ä»¶ï¼ˆéœ€è¦åœ¨å¯¦éš›æ‡‰ç”¨ä¸­é‹è¡Œï¼‰
            const alchemyKeyPublic = 'F7E3-HDwgUHDQvdICnFv_lZ-aQJSyKT3'; // å¾ä½ çš„ .env æ–‡ä»¶è¤‡è£½
            
            log('âœ… VITE_ALCHEMY_KEY_PUBLIC å­˜åœ¨');
            log('Key é•·åº¦: ' + alchemyKeyPublic.length);
            log('Key é è¦½: ' + alchemyKeyPublic.substring(0, 10) + '...');
            
            if (alchemyKeyPublic.length > 20) {
                log('âœ… Key é•·åº¦é©—è­‰é€šé');
                const alchemyUrl = `https://bnb-mainnet.g.alchemy.com/v2/${alchemyKeyPublic}`;
                log('é æœŸ Alchemy URL: ' + alchemyUrl.substring(0, 50) + '...');
            } else {
                log('âŒ Key é•·åº¦ä¸è¶³');
            }
        }

        async function testAlchemyConnection() {
            const alchemyKeyPublic = 'F7E3-HDwgUHDQvdICnFv_lZ-aQJSyKT3';
            const alchemyUrl = `https://bnb-mainnet.g.alchemy.com/v2/${alchemyKeyPublic}`;
            
            log('ğŸ”— æ¸¬è©¦ Alchemy é€£æ¥...');
            
            try {
                const response = await fetch(alchemyUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        jsonrpc: '2.0',
                        method: 'eth_blockNumber',
                        params: [],
                        id: 1,
                    }),
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message);
                }
                
                const blockNumber = parseInt(data.result, 16);
                log('âœ… Alchemy é€£æ¥æˆåŠŸï¼');
                log('ç•¶å‰å€å¡Šè™Ÿ: ' + blockNumber);
                
            } catch (error) {
                log('âŒ Alchemy é€£æ¥å¤±æ•—: ' + error.message);
                
                // æ¸¬è©¦å…¬å…±ç¯€é»ä½œç‚ºå°æ¯”
                log('ğŸ”„ æ¸¬è©¦å…¬å…±ç¯€é»...');
                try {
                    const publicResponse = await fetch('https://bsc-dataseed1.binance.org/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            jsonrpc: '2.0',
                            method: 'eth_blockNumber',
                            params: [],
                            id: 1,
                        }),
                    });
                    
                    const publicData = await publicResponse.json();
                    const publicBlockNumber = parseInt(publicData.result, 16);
                    log('âœ… å…¬å…±ç¯€é»é€£æ¥æˆåŠŸï¼Œå€å¡Šè™Ÿ: ' + publicBlockNumber);
                    
                } catch (publicError) {
                    log('âŒ å…¬å…±ç¯€é»ä¹Ÿå¤±æ•—: ' + publicError.message);
                }
            }
        }
    </script>
</body>
</html>