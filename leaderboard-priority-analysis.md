# 排行榜優先級分析與優化

## 各排行榜重要性分析

基於遊戲經濟模型和玩家行為，各排行榜的重要性權重：

### 1. 💰 總收益排行（30%）- 最重要
- **子圖依賴度**：高（需要 PlayerStats.totalRewardsEarned）
- **為什麼重要**：
  - 直接反映玩家的遊戲成就
  - 激勵核心玩法循環（地下城探險）
  - 展示經濟實力和成功程度
- **預設顯示**：✅ 已設為預設

### 2. ⚔️ 通關次數排行（25%）- 重要
- **子圖依賴度**：中（需要 PlayerProfile.successfulExpeditions）
- **為什麼重要**：
  - 反映玩家活躍度
  - 鼓勵持續遊玩
  - 展示遊戲經驗

### 3. 🛡️ 隊伍戰力排行（20%）- 重要
- **子圖依賴度**：低（Party 實體基本數據）
- **為什麼重要**：
  - 展示最優配置策略
  - 激勵 NFT 收集和升級
  - 提供配置參考

### 4. 👑 VIP 等級排行（15%）- 中等
- **子圖依賴度**：低（VIP 實體基本數據）
- **為什麼重要**：
  - 展示玩家投入程度
  - 促進 VIP 系統使用
  - 社交地位象徵

### 5. 🎯 玩家等級排行（5%）- 較低
- **子圖依賴度**：低（PlayerProfile.level）
- **為什麼重要**：
  - 輔助指標
  - 新手友好
  - 長期目標

### 6. ⚡ 升級次數排行（5%）- 較低
- **子圖依賴度**：高（需要 PlayerStats.totalUpgradeAttempts）
- **為什麼重要**：
  - 展示遊戲深度參與
  - 賭博系統活躍度

## 實施優化

### 已完成
1. ✅ 調整排行榜顯示順序（按重要性排列）
2. ✅ 優化移動端顯示（使用圖標+簡稱）
3. ✅ 保持總收益排行為預設

### 顯示順序（從左到右）
1. 💰 收益（預設）
2. ⚔️ 通關
3. 🛡️ 戰力
4. 👑 VIP
5. 🎯 等級
6. ⚡ 升級

## 降級策略建議

當子圖查詢失敗時的處理方案：

### 優先顯示低依賴度排行榜
```typescript
const FALLBACK_PRIORITY = [
  'partyPower',    // 最低子圖依賴
  'vipLevel',      // 低依賴
  'playerLevel',   // 低依賴
  'totalEarnings', // 高依賴但最重要
  'dungeonClears', // 中依賴
  'upgradeAttempts' // 高依賴
];
```

### 實施建議
1. 為每個排行榜類型添加 `subgraphDependency` 標記
2. 當主要查詢失敗時，自動切換到低依賴度排行榜
3. 顯示提示說明某些數據暫時不可用

## 思維突破

**動態權重系統**：根據時間和遊戲階段自動調整排行榜重要性

- **早期（前3個月）**：強調等級和通關，降低收益權重
- **中期（3-6個月）**：平衡各項指標
- **成熟期（6個月+）**：強調收益和戰力，降低等級權重

這樣可以在不同階段給予玩家不同的成就感，延長遊戲生命週期。