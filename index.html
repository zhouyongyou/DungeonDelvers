<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon Delvers - 互動式網頁應用</title>
    
    <!-- 樣式與字體保留在 <head> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-gray-800">

    <div class="min-h-screen flex flex-col">
        <!-- Header (保持不變) -->
        <header class="bg-[#1F1D36] shadow-lg sticky top-0 z-50">
            <div class="container mx-auto px-4 py-3">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-2xl md:text-3xl font-bold text-white text-shadow-gold">Dungeon Delvers</h1>
                        <p class="text-sm text-gray-300">你的奇幻冒險由此開始</p>
                    </div>
                    <button id="connectWalletBtn" class="btn-primary px-4 py-2 rounded-lg text-sm md:text-base">連接錢包</button>
                </div>
                <nav id="navigation" class="mt-4 flex flex-wrap justify-center space-x-2 md:space-x-6 text-sm md:text-base">
                    <a class="nav-item active" data-target="guide">遊戲指南</a>
                    <a class="nav-item" data-target="dashboard">我的總覽</a>
                    <a class="nav-item" data-target="forge">英雄酒館</a>
                    <a class="nav-item" data-target="barracks">我的隊伍</a>
                    <a class="nav-item" data-target="portal">地下城入口</a>
                </nav>
            </div>
        </header>

        <!-- Main Content (保持不變) -->
        <main id="main-content" class="flex-grow container mx-auto p-4 md:p-6 lg:p-8">
            <section id="guide" class="page-content">
                <h2 class="text-3xl font-bold text-center mb-6 text-[#2D2A4A]">遊戲指南 & 規則</h2>
                <div class="bg-white/50 p-6 rounded-xl shadow-md mb-8">
                    <h3 class="text-2xl font-bold text-[#2D2A4A] mb-4">歡迎來到 Dungeon Delvers 的世界</h3>
                    <p class="text-lg">這是一款奇幻風格的 NFT 遊戲。您將招募傳奇的英雄，藉由強大的聖物之力，深入被遺忘的地下城，尋找蘊含著世界本源能量的「魂晶」($SoulShard)，並在此過程中贏得榮耀與財富。準備好開始你的史詩冒險了嗎？</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-center text-[#2D2A4A]">英雄稀有度 & 掉落機率</h3>
                        <div class="chart-container"><canvas id="heroChart"></canvas></div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-center text-[#2D2A4A]">聖物稀有度 & 掉落機率</h3>
                        <div class="chart-container"><canvas id="relicChart"></canvas></div>
                    </div>
                </div>
            </section>
            <section id="dashboard" class="page-content hidden">
                 <h2 class="text-3xl font-bold text-center mb-6 text-[#2D2A4A]">我的總覽</h2>
                 <div class="bg-white/50 p-6 rounded-xl shadow-md text-center">
                    <p class="text-lg">請先連接錢包以查看您的個人數據。</p>
                    <p class="text-gray-600 mt-4">(此處未來將顯示您的 $SoulShard 餘額、資產總覽等資訊)</p>
                 </div>
            </section>
            <section id="forge" class="page-content hidden">
                <h2 class="text-3xl font-bold text-center mb-2 text-[#2D2A4A]">英雄酒館 & 古代熔爐</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="card-bg p-6 rounded-xl shadow-lg flex flex-col items-center">
                        <h3 class="text-2xl font-bold mb-4">招募英雄</h3>
                        <p class="text-center mb-6">花費 $SoulShard，你可能招募到傳說中的英雄，或是初出茅廬的新手。</p>
                        <button id="mintHeroBtn" class="btn-primary px-8 py-3 rounded-lg text-lg">招募</button>
                    </div>
                    <div class="card-bg p-6 rounded-xl shadow-lg flex flex-col items-center">
                        <h3 class="text-2xl font-bold mb-4">鑄造聖物</h3>
                        <p class="text-center mb-6">花費 $SoulShard，喚醒沉睡的古代聖物，它將決定你隊伍的規模。</p>
                        <button id="mintRelicBtn" class="btn-primary px-8 py-3 rounded-lg text-lg">鑄造</button>
                    </div>
                </div>
            </section>
            <section id="barracks" class="page-content hidden">
                <h2 class="text-3xl font-bold text-center mb-2 text-[#2D2A4A]">我的隊伍</h2>
                <div class="mb-8">
                    <h3 class="text-2xl font-bold mb-4 text-[#2D2A4A]">我的英雄 (Heroes)</h3>
                    <div id="heroesContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                        <p class="col-span-full text-center text-gray-500">連接錢包後將顯示您的英雄...</p>
                    </div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-[#2D2A4A]">我的聖物 (Relics)</h3>
                    <div id="relicsContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                         <p class="col-span-full text-center text-gray-500">連接錢包後將顯示您的聖物...</p>
                    </div>
                </div>
            </section>
            <section id="portal" class="page-content hidden">
                <h2 class="text-3xl font-bold text-center mb-2 text-[#2D2A4A]">地下城入口</h2>
                <div class="card-bg p-6 rounded-xl shadow-lg mb-8">
                    <h3 class="text-2xl font-bold mb-4 text-center">當前隊伍配置</h3>
                    <div id="currentParty" class="text-center">
                        <p class="text-lg">尚未組建隊伍。請前往「我的隊伍」頁面進行配置。</p>
                        <p class="text-xl font-bold text-[#C0A573] mt-2">總戰力: <span id="totalPower">0</span></p>
                    </div>
                </div>
                <div id="dungeonsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>
        </main>
    </div>

    <!-- 
      **最終修正**: 使用 `defer` 屬性。
      這會非阻塞地載入腳本，並確保它們在 HTML 解析完畢後，嚴格按照順序執行。
      這是最現代且最可靠的作法。
    -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
```

### **除錯步驟**

在您用上面的程式碼**完全覆蓋** `index.html` 檔案後，請嚴格按照以下步驟操作：

1.  **儲存檔案**。

2.  **開啟瀏覽器**，進入您的網頁。

3.  **強制清除快取並重新整理**：
    * 在 Windows/Linux 上，按 `Ctrl` + `Shift` + `R`。
    * 在 Mac 上，按 `Cmd` + `Shift` + `R`。
    * 這一步非常重要，能確保瀏覽器載入的是您最新的檔案，而不是舊的快取。

4.  **打開開發者工具**：在頁面上按 `F12` 鍵 (或者右鍵 -> 檢查)。

5.  **切換到「主控台 (Console)」分頁**。

6.  現在，點擊「連接錢包」按鈕。

請查看主控台中顯示的訊息。如果問題仍然是 `ethers is not defined`，請您**切換到開發者工具的「網路 (Network)」分頁**，然後再次強制重新整理頁面 (`Ctrl`+`Shift`+`R`)。在檔案列表中找到 `ethers-5.7.2.umd.min.js` 這一行，看看它的「狀態 (Status)」碼是什麼。

* 如果是 `200` (綠色)，代表檔案載入成功。
* 如果是 `404` 或其他紅色錯誤，代表檔案下載失敗。

請將您看到的結果告訴我，這將是我們解決問題的最關鍵
