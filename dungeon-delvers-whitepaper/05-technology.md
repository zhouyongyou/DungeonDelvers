# 5. 技術實現 (Technology)

* **區塊鏈**: 幣安智能鏈 (Binance Smart Chain, BSC) - 提供高效、低成本的交易環境。
* **智能合約**: Solidity ^0.8.20, OpenZeppelin
* **隨機數 (VRF)**: Chainlink VRF v2.5
* **前端框架**: React
* **程式語言**: TypeScript
* **建構工具**: Vite
* **Web3 連接**: Wagmi & viem

> **5.1 打造流暢的 DApp 體驗**
>
> 除了核心的區塊鏈技術，我們同樣重視使用者的操作體驗，並在前端實現了以下機制：
>
> * 全域交易追蹤系統：我們使用 `zustand` 建立了一個全域狀態管理器 (`useTransactionStore`)，能夠在您提交交易後，自動在背景追蹤其狀態。無論交易是成功還是失敗，您都會在第一時間收到通知，無需手動刷新頁面。
> * 即時事件監聽與 UI 更新：應用程式會透過 `useContractEvents` 這個自定義 Hook，持續監聽鏈上事件。當您鑄造成功、創建隊伍或完成遠征時，相關的 UI 介面（如您的 NFT 列表）都會自動刷新，提供無縫的即時反饋。
> * 精美的視覺主題：DApp 內建了精心設計的淺色與深色主題模式，並能根據您的系統偏好自動切換。我們透過 `ThemeContext` 確保了在不同模式下所有元件都有一致且舒適的視覺表現。
> * 非阻塞式通知系統：我們自定義了 `Toast` 通知系統，所有操作反饋（如「授權成功」、「交易已送出」）都會以非阻塞式彈窗的形式出現，不會打斷您的當前操作。

> **核心安全與公平性保障**
>
> 為確保遊戲生態的長期穩定與公平，我們在合約層面設計了以下關鍵機制：
>
> * 隊伍鎖定機制 (Party Lock)：為防止玩家在遠征期間或仍有「儲備」時轉移或分解資產以規避規則，`Party.sol` 合約會透過 `isPartyLocked` 函式進行檢查。當隊伍處於「遠征冷卻中」或「尚有儲備」的狀態時，該隊伍 NFT 將被暫時鎖定，無法被轉移或解散。
> * 鑄造速率限制 (Mint Rate Limit)：為了防止惡意機器人或在短時間內大量鑄造 NFT 衝擊市場，`Hero.sol` 和 `Relic.sol` 合約中都設有 `blockMintLimit` 參數。此參數限制了在單一區塊內可以完成的總鑄造數量，有效維持了市場的穩定性。
> * 緊急暫停機制 (Pausable)：我們所有的核心業務合約 (`DungeonCore`, `Hero`, `Relic`, `Party`, `AltarOfAscension`) 都繼承了 OpenZeppelin 的 `Pausable` 模組。這賦予了合約擁有者在遭遇潛在威脅或需要進行重大維護時，能夠暫停合約的核心功能的能力，最大程度地保障所有玩家的資產安全。
